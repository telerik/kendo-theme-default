// Infinite calendar
@mixin hide-scrollbar($dir: 'right') {
    // anything larger than the scrollbar width will do
    $max-scrollbar: 20px;
    $scrollbar-size: 17px;
    $margin: -$max-scrollbar - $scrollbar-size;

    padding-right: $max-scrollbar;
    padding-left: $max-scrollbar;
    margin-left: -$max-scrollbar;
    margin-right: -$max-scrollbar;

    @if ($dir == 'right') {
        margin-right: $margin;
    } @else {
        margin-left: $margin;
    }
}


@include exports("datetime/layout") {
    $timepicker-header-height: 2em;

    // Datepicker
    .k-datepicker,
    .k-datetimepicker,
    .k-timepicker {

        .k-i-warning {
            display: none;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            overflow: visible;
        }

        .k-state-invalid {
            .k-i-warning {
                display: inline-block;
            }
        }

        .k-dateinput {
            width: 100%;
            flex: 1;
        }

        .k-dateinput-wrap {
            border: 0;
            @include border-left-radius-only();
        }

        .k-rtl &,
        &[dir='rtl'] {
            .k-i-warning {
                right: auto;
            }
        }
    }

    .k-datepicker,
    .k-timepicker {

        .k-i-warning {
            right: calc( #{ button-inner-size( 1 ) } + #{ $input-padding-x-sm });
        }

        .k-rtl &,
        &[dir='rtl'] {
            .k-i-warning {
                left: calc( #{ button-inner-size( 1 ) } + #{ $input-padding-x-sm });
            }
        }
    }

    .k-datetimepicker {

        .k-i-warning {
            right: calc( #{ button-inner-size( 2 ) } + #{ $input-padding-x-sm });
        }

        .k-rtl &,
        &[dir='rtl'] {
            .k-i-warning {
                left: calc( #{ button-inner-size( 2 ) } + #{ $input-padding-x-sm });
            }
        }
    }

    // Timepicker
    .k-timepicker {}

    // Datetimepicker
    .k-datetimepicker {

        .k-select {
            padding: 0;
            border-left-width: 0;
            align-items: stretch;
        }
        .k-link {
            padding: $button-padding-y;
            border-width: 0 0 0 1px;
            border-style: solid;
            border-color: inherit;
            display: flex;
            align-items: center;
            justify-content: center;
        }

    }


    // Dateinput
    .k-dateinput {
        position: relative;
        border-width: 0;

        .k-i-warning {
            display: none;
            position: absolute;
            right: $padding-x;
            top: 50%;
            transform: translateY(-50%);
            overflow: visible;
        }

        &.k-state-invalid .k-i-warning {
            display: inline-block;
        }

        .k-rtl &,
        &[dir='rtl'] {
            .k-i-warning {
                left: $padding-x;
                right: auto;
            }
        }

    }

    // Infinite timepicker
    // Header
    .k-time-header { // Same as the calendar header
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 2 * $padding-y $padding-x * 2;
        line-height: $timepicker-header-height;
    }

    // Content
    .k-time-list-wrapper {
        display: flex;
        overflow: hidden;
        box-sizing: content-box;
        overflow-x: hidden;
        overflow-y: auto;
    }

    .k-time-container {
        position: relative;
        display: flex;
        overflow-x: hidden;
        overflow-y: auto;
        width: 5em;
        height: 200px;
        line-height: $line-height;
        justify-content: center;

        .k-content {
            height: auto;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
        }
    }

    .k-time-list-container {
        display: flex;
        flex: 1 0 auto;
        position: relative;
        padding: $padding-y * 4 $padding-y;
    }

    .k-time-list {
        position: relative;
        display: flex;
        z-index: 10;
        outline: 0;
        @include hide-scrollbar('right');
    }

    .k-time-list .k-item {
        // The sum should be 30px
        padding: $list-item-padding-y $list-item-padding-x;
        min-height: add-two($line-height-em, 2px);
        line-height: add-two($line-height-em, 2px);
        // Or
        //min-height: button-size();
        //line-height: button-size();
    }

    .k-time-highlight {
        position: absolute;
        top: 50%;
        right: 0;
        transform: translateY(-50%);
        width: 100%;
        height: button-inner-size();
        border-width: 1px 0;
        border-style: solid;
        z-index: 1;
    }

    .k-time-container .k-scrollable-placeholder {
        position: absolute;
        width: 1px;
        top: 0;
        right: 0;
    }

    .k-time-separator {
        display: inline-flex;
        align-self: center;
        justify-content: center;
        width: 1em;
        height: 100%;
        z-index: 11;
    }
}